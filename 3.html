<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>centos7使用ssh密钥登陆 - 闹市无声</title><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" type="text/css" href="/style.css"></head><body><div class="header"><a href="/"><img src="/logo.png" alt="闹市无声"></a></div><div class="post"><h3>centos7使用ssh密钥登陆</h3><p>在某些时候，使用密码作为登录服务器的认证方式是不太安全的，为避免密码被暴力破解，许多时候可以采用ssh密钥登录服务器，这里以CentOS为例。</p><h4>1、生成秘钥对，在服务器上利用ssh-keygen生成</h4><pre>ssh-keygen -t rsa</pre><p>一路enter跳过(当然你也可以自己定义，不过没必要)，会在/root/.ssh下生成公钥(id_rsa.pub)私钥(id_rsa) （公钥是用于服务器端，私钥是用于客户端） 然后将私钥下载至电脑上(登录时会用到)。</p><h4>2、修改/etc/ssh/sshd_config如下部分</h4><pre>RSAAuthentication yes
# 开启RSA验证
PubkeyAuthentication yes
# 是否使用公钥验证
AuthorizedKeysFile .ssh/authorized_keys
# 公钥的保存位置
PasswordAuthentication no
# 禁止使用密码验证登录</pre><p>这里最好是禁止使用密码验证登录，否则用密钥就没多大意义了，更改后保存。</p><h4>3、进入到密钥保存的目录</h4><pre>cd /root/.ssh</pre><p>新建密钥验证文件”authorized_keys”，并将公钥输出重定向覆盖密钥验证文件</p><pre>touch authorized_keys
cat id_rsa.pub >> authorized_keys</pre><p>修改authorized_keys文件权限为600</p><pre>chmod 600 /root/.ssh/authorized_keys</pre><h4>4、重启ssh服务</h4><pre>systemctl restart sshd.service</pre><p>接下来就能够通过密钥登录服务器了</p></div></body></html>
