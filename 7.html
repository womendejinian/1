<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>centos7部署ServerStatus-Rust版探针 - 闹市无声</title><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" type="text/css" href="/style.css"></head><body><div class="header"><a href="/"><img src="/logo.png" alt="闹市无声"></a></div><div class="post"><h3>centos7部署ServerStatus-Rust版探针</h3><p>以针会友，分享下在吃灰小鸡上部署ServerStatus-Rust版探针的过程</p><h4>服务端</h4><p>1.在opt目录新建ServerStatus文件夹并进入</p><pre>mkdir -p /opt/ServerStatus && cd /opt/ServerStatus</pre><p>2.如果是服务端就下载服务端所需要的文件</p><pre>wget --no-check-certificate -qO server.zip  "https://pan.11.yt/chfs/shared/ServerStatus-Rust/server.zip"</pre><p>3.解压文件</p><pre>unzip -o server.zip</pre><p>4.修改配置文件config.toml里面的端口和hosts参数，根据需求修改</p><pre>vim config.toml</pre><p>摁i进入插入模式编辑文件，编辑完摁ESC切换到命令行模式，摁冒号：进入底行模式。</p><p>常见底行模式的命令：</p><pre>:w filename 文件以filename为文件名保存
:wq 文件存盘并退出vim
:q 文件不存盘并退出vim
:q! 文件不存盘强制退出vim</pre><p>删除单词：</p><pre>dw：把光标停留在需要删除的单词前面，依次按下「d」「w」，即可
de：把光标停留在需要删除的单词前面（无视单词前面的空格），依次按下「d」「e」，即可</pre><p>详细可见：https://www.jianshu.com/p/8b679b35c9d5</p><p>5.移动stat_server.service和stat_client.service到系统服务文件夹</p><pre>mv -v stat_server.service /etc/systemd/system/stat_server.service
mv -v stat_client.service /etc/systemd/system/stat_client.service</pre><p>6.重新加载系统服务</p><pre>systemctl daemon-reload</pre><p>7.启动服务</p><pre>systemctl start stat_server
systemctl start stat_client</pre><p>8.使用以下命令开机自启</p><pre>systemctl enable stat_server
systemctl enable stat_client</pre><p>9.停止服务</p><pre>systemctl stop stat_server
systemctl stop stat_client</pre><h4>客户端</h4><p>1.在opt目录新建ServerStatus文件夹并进入</p><pre>mkdir -p /opt/ServerStatus && cd /opt/ServerStatus</pre><p>2.如果是服务端就下载服务端所需要的文件</p><pre>wget --no-check-certificate -qO server.zip  "https://pan.11.yt/chfs/shared/ServerStatus-Rust/client.zip"</pre><p>3.解压文件</p><pre>unzip -o client.zip</pre><p>4.修改stat_client.service文件，将IP改为你服务端服务器的IP或你的域名</p><pre>vim stat_client.service</pre><p>(vim使用方法如上)</p><p>5.移动stat_client.service到系统服务文件夹</p><pre>mv -v stat_client.service /etc/systemd/system/stat_client.service</pre><p>6.重新加载系统服务</p><pre>systemctl daemon-reload</pre><p>7.启动服务</p><pre>systemctl start stat_client</pre><p>8.使用以下命令开机自启</p><pre>systemctl enable stat_client</pre><p>9.停止服务</p><pre>systemctl stop stat_client</pre></div></body></html>
